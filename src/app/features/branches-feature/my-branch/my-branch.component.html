<div class="p-4 md:p-6">
  <!-- Header -->
  <div
    class="flex flex-col md:flex-row justify-between items-start md:items-center pb-6"
  >
    <div>
      <h1
        class="text-2xl md:text-3xl font-semibold text-gray-800 dark:text-gray-100"
      >
        Mis Sucursales
      </h1>
      <p class="text-gray-500 dark:text-gray-400 pt-1">
        Selecciona la sucursal donde deseas trabajar
      </p>
    </div>
  </div>

  <!-- Sucursales Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    @for (branch of branches(); track $index) {
    <div
      class="group relative overflow-hidden rounded-xl border transition-all duration-300 hover:shadow-lg"
      [class]="
        selectedBranch().branchId === branch.branchId
          ? 'bg-primary-50 border-primary-300 dark:bg-primary-900/20 dark:border-primary-700'
          : 'bg-white border-gray-200 hover:border-primary-200 dark:bg-gray-800 dark:border-gray-700 dark:hover:border-primary-800'
      "
      (click)="selectBranch(branch)"
    >
      <!-- Indicador de selección -->
      @if (selectedBranch().branchId === branch.branchId) {
      <div
        class="absolute top-3 right-3 bg-primary-500 dark:bg-primary-600 w-8 h-8 rounded-full flex items-center justify-center shadow-sm"
      >
        <i class="pi pi-check text-white text-sm"></i>
      </div>
      }

      <div class="p-5">
        <!-- Icono y título -->
        <div class="flex items-start gap-3 pb-4">
          <div
            class="bg-primary-100 dark:bg-primary-900/40 p-3 rounded-lg pr-4"
          >
            <i
              class="pi pi-building text-primary-500 dark:text-primary-400 text-xl"
            ></i>
          </div>
          <div>
            <h2 class="text-lg font-semibold text-gray-800 dark:text-gray-100">
              Sucursal
            </h2>
            <p class="text-gray-600 dark:text-gray-300">
              {{ branch.address }}
            </p>
          </div>
        </div>

        <!-- Info adicional y botón -->
        <div
          class="flex justify-between items-center pt-4 border-t border-gray-100 dark:border-gray-700"
        >
          <span
            class="text-xs px-2.5 py-1 rounded-full"
            [class]="
              selectedBranch().branchId === branch.branchId
                ? 'bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300'
                : 'bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400'
            "
          >
            <i class="pi pi-map-marker pr-1"></i>
            {{
              selectedBranch().branchId === branch.branchId
                ? "Seleccionada"
                : "Disponible"
            }}
          </span>

          <button
            pButton
            [label]="
              selectedBranch().branchId === branch.branchId
                ? 'Actualmente activa'
                : 'Seleccionar'
            "
            [disabled]="selectedBranch().branchId === branch.branchId"
            [class]="
              selectedBranch().branchId === branch.branchId
                ? 'p-button-outlined p-button-success p-button-sm'
                : 'p-button-outlined p-button-primary p-button-sm'
            "
            icon="pi pi-check"
          ></button>
        </div>
      </div>
    </div>
    } @empty{
    <div
      class="flex flex-col items-center justify-center p-8 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700"
    >
      <i
        class="pi pi-building text-gray-400 dark:text-gray-500 text-4xl pb-4"
      ></i>
      <h3 class="text-xl font-medium text-gray-700 dark:text-gray-300 pb-2">
        No hay sucursales disponibles
      </h3>
      <p class="text-gray-500 dark:text-gray-400 text-center">
        No se encontraron sucursales para mostrar. Por favor, contacta con el
        administrador.
      </p>
    </div>
    }
  </div>
</div>
