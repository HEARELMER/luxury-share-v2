<main class="flex w-full gap-4 justify-center flex-col">
  <div
    cdkDropList
    cdkDropListOrientation="horizontal"
    (cdkDropListDropped)="onDrop($event)"
    class="grid items-center justify-center grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 w-full"
  >
    @for (card of cards(); track card.id) {
    <div
      cdkDrag
      class="relative group cursor-move"
      [class.shadow-lg]="card.isDragging"
    >
      <!-- Preview mientras se arrastra -->
      <div *cdkDragPreview class="rounded-xl p-4 opacity-70 {{ card.bg }} ">
        <app-card-home
          [title]="card.title"
          [number]="card.number"
          [bg]="card.bg"
          [buttonBg]="card.buttonBg"
          [routerLink]="card.routerLink"
        />
      </div>

      <!-- Card real -->
      <app-card-home
        [title]="card.title"
        [number]="card.number"
        [bg]="card.bg"
        [buttonBg]="card.buttonBg"
        [routerLink]="card.routerLink"
      >
        <div
          class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-all duration-200"
        >
          <i class="pi pi-grip-lines text-white/50"></i>
        </div>
      </app-card-home>
    </div>
    }
  </div>

  <div class="flex flex-col lg:flex-row w-full gap-6">
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 w-full lg:w-3/4">
      @defer {
      <app-chart-bar
        class="w-full"
        [orientation]="'y'"
        [title]="'Top Paquetes mÃ¡s vendidos'"
        [labels]="topPackages"
      ></app-chart-bar>

      } @defer {
      <app-chart-bar
        class="w-full"
        [orientation]="'y'"
        [title]="'Top Servicios mÃ¡s vendidos'"
        [labels]="topServices"
      ></app-chart-bar>

      }

      <app-chart-line
        class="w-full sm:col-span-2"
        [title]="'Total de ventas realizadas'"
      ></app-chart-line>
    </div>

    <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-6 w-full lg:w-1/4"
    >
      @defer {
      <app-chart-bar
        class="w-full"
        [title]="'Ventas por sucursal'"
        [labels]="totalSalesByBranch"
      ></app-chart-bar>

      }
      <!-- <app-date-picker class="w-full"></app-date-picker> -->
    </div>
  </div>
</main>
