<main class="flex flex-col gap-4">
  <!-- Header con tabs -->
  <div class="bg-white rounded-lg shadow-sm p-4 border">
    <div class="flex gap-4">
      <button
        pButton
        [label]="'Ventas'"
        [icon]="'pi pi-chart-line'"
        [outlined]="activeTab() !== 'sales'"
        [class]="
          activeTab() === 'sales' ? 'p-button-primary' : 'p-button-secondary'
        "
        (click)="activeTab.set('sales')"
      ></button>
      <button
        pButton
        [label]="'Rendimiento'"
        [icon]="'pi pi-users'"
        [outlined]="activeTab() !== 'performance'"
        [class]="
          activeTab() === 'performance'
            ? 'p-button-primary'
            : 'p-button-secondary'
        "
        (click)="activeTab.set('performance')"
      ></button>
      <button
        pButton
        [label]="'Clientes'"
        [icon]="'pi pi-user'"
        [outlined]="activeTab() !== 'clients'"
        [class]="
          activeTab() === 'clients' ? 'p-button-primary' : 'p-button-secondary'
        "
        (click)="activeTab.set('clients')"
      ></button>
    </div>
  </div>

  <!-- Filtros -->
  <form [formGroup]="filtersForm" class="bg-white rounded-lg shadow-sm border">
    <div class="p-4 border-b">
      <h2 class="text-lg font-medium text-gray-800">Filtros</h2>
    </div>

    <div class="p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      <!-- Rango de fechas -->
      <div class="col-span-1">
        <app-select
          label="Rango de fechas"
          [options]="dateRangeOptions"
          formControlName="dateRange"
          icon="pi pi-calendar"
        />
      </div>

      <!-- Fechas personalizadas -->
      @if (filtersForm.get('dateRange')?.value === 'custom') {
      <div class="col-span-2 grid grid-cols-2 gap-4">
        <app-input-form
          label="Fecha inicio"
          type="date"
          formControlName="customDateStart"
        />
        <app-input-form
          label="Fecha fin"
          type="date"
          formControlName="customDateEnd"
        />
      </div>
      }

      <!-- Tipo de servicio -->
      <div class="col-span-1">
        <app-select
          label="Tipo de servicio"
          [options]="serviceTypeOptions"
          formControlName="serviceType"
          icon="pi pi-tag"
        />
      </div>

      <!-- Vendedor -->
      <div class="col-span-1">
        <app-select
          label="Vendedor"
          [options]="[]"
          formControlName="seller"
          icon="pi pi-user"
        />
      </div>

      <!-- Sucursal -->
      <div class="col-span-1">
        <app-select
          label="Sucursal"
          [options]="[]"
          formControlName="branch"
          icon="pi pi-building"
        />
      </div>

      <!-- Tipo de cliente -->
      <div class="col-span-1">
        <app-select
          label="Tipo de cliente" 
          formControlName="clientType"
          icon="pi pi-users"
        />
      </div>
    </div>

    <!-- Acciones -->
    <div class="p-4 border-t bg-gray-50/50 flex justify-between items-center">
      <button
        pButton
        label="Limpiar filtros"
        icon="pi pi-filter-slash"
        class="p-button-outlined p-button-secondary"
        (click)="filtersForm.reset()"
      ></button>

      <div class="flex gap-2">
        <button
          pButton
          label="Exportar"
          icon="pi pi-file-excel"
          class="p-button-success"
        ></button>
        <button
          pButton
          label="Aplicar filtros"
          icon="pi pi-search"
          class="p-button-primary"
        ></button>
      </div>
    </div>
  </form>
  <app-sales-table
    [data]="salesData()"
    [loading]="loading()"
    [totalRecords]="totalRecords()"
    (stateChange)="loadData($event)"
    (export)="onExport($event)"
  />
  <!-- Contenedor para los grÃ¡ficos/datos -->
  
</main>
