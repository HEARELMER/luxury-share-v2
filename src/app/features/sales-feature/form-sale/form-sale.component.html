<app-modal [(isOpen)]="showModal" [closeOnBackdrop]="false">
  <main class="flex flex-col h-auto w-[90vw] max-w-7xl mx-auto ">
    <header class="flex w-full justify-between items-center">
      <h2 class="text-lg font-semibold text-primary-500">
        Nueva Ventas
      </h2>
      <button
        class="hover:bg-primary-100 hover:rotate-90 text-primary-500 duration-300 ease-in-out w-10 h-10 flex items-center justify-center rounded-full"
        (click)="closeModal()"
      >
        <i class="pi pi-times"></i>
      </button>
    </header>
    <section class="h-full " >
       <p-stepper   [value]="1" styleClass="flex-grow bg-gray-500 flex flex-col"  >
        <p-step-list>
          @for (step of addSaleSteps; track $index) {
          <p-step [value]="step.value">
            {{ step.label }}
          </p-step>
          }
        </p-step-list>
        <p-step-panels   styleclass="flex-grow flex flex-col overflow-auto">
          <p-step-panel [value]="1" styleClass="flex-grow justify-between   h-full flex flex-col">
            <ng-template #content let-activateCallback="activateCallback">
              <div   styleClass="flex flex-col justify-between   h-full p-6 rounded-lg lg:px-14 flex-grow">
                <form
                  [formGroup]="clientForm"
                  class="grid grid-cols-1 md:grid-cols-2   gap-4 flex-grow"
                >
                  <app-select
                    label="Tipo de Documento"
                    [required]="true"
                    [options]="[
                      { label: 'Dni', value: 'dni' },
                      { label: 'Carnet de Extranjeria', value: 'ce' },
                      { label: 'otros', value: 'otros' }
                    ]"
                    class="w-full"
                    formControlName="typeDocument"      
                  />
               
                  <div class="flex items-end gap-2">
                    <app-input-form
                      [required]="true"
                      label="N° Documento"
                      [isPositive]="true"
                      class="w-full"
                      formControlName="numberDocument"
                    />
                    <button
                      pButton
                      type="button"
                      icon="pi pi-search"
                      class="p-button-rounded p-button-primary"
                      (click)="searchClientByDni()"
                    ></button>
                  </div>
                  <app-input-form
                    [required]="true"
                    label="Nombres"
                    class="w-full"
                    formControlName="name"
                  />
                  <app-input-form
                    [required]="true"
                    label="Primer Apellido"
                    class="w-full"
                    formControlName="firstLastname"
                  />
                  <app-input-form
                    [required]="true"
                    label="Segundo Apellido"
                    class="w-full"
                    formControlName="secondLastname"
                  />
                  <app-input-form
                    label="Fecha de nacimiento"
                    class="w-full"
                    formControlName="birthDate"
                    type="date"
                  />
                  <app-input-form
                    label="Correo Electrónico"
                    class="w-full"
                    type="email"
                    formControlName="email"
                  />
                  <app-input-form
                    [required]="true"
                    label="Número de Celular"
                    class="w-full"
                    formControlName="phone"
                    [isPositive]="true"
                    [maxLength]="9"
                  />
                </form>

                <div class="flex pt-6  gap-3 justify-end">
                  <app-button
                    text="Cancelar" 
                    moreClasses="py-2"
                    bgColor="bg-gray-100"
                    textColor="text-black"
                    (click)="closeModal()"
                  />
                  <app-button
                    text="Siguiente"
                    icon="pi pi-arrow-right"
                    moreClasses="py-2"
                    bgColor="bg-primary-500"
                    textColor="text-white"
                    (click)=" createClient()"
                    [disabled]="!clientForm.valid"
                  /> 
                </div>
              </div>
            </ng-template>
          </p-step-panel>
          <p-step-panel [value]="2" class="flex-grow flex flex-col">
            <ng-template #content let-activateCallback="activateCallback">
              <app-services-packages-sale-form />
            </ng-template>
          </p-step-panel>
          <p-step-panel [value]="3" class="flex-grow flex flex-col">
            <ng-template #content let-activateCallback="activateCallback">
              <div class="flex pt-6 justify-end">
                <p-button
                  label="Guardar"
                  icon="pi pi-lock"
                  iconPos="right"
                  (onClick)="activateCallback(2)"
                />
              </div>
            </ng-template>
          </p-step-panel>
        </p-step-panels>
       </p-stepper>
    </section>
   
  </main>
</app-modal>