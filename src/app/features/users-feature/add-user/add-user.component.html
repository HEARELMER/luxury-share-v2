<app-modal [(isOpen)]="showModal" [closeOnBackdrop]="false">
  <div class="flex w-full justify-between items-center">
    <h2 class="text-lg font-semibold text-primary-500">
      {{ isEditing() ? "Editar" : "Agregar" }}
      {{ rolePreselected() | capitalize }}
    </h2>
    <button
      class="hover:bg-primary-100 hover:rotate-90 text-primary-500 duration-300 ease-in-out w-10 h-10 flex items-center justify-center rounded-full"
      (click)="closeModal()"
    >
      <i class="pi pi-times"></i>
    </button>
  </div>
  <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="w-full py-4">
    <div
      class="grid grid-cols-1 pb-4 md:grid-cols-2 w-full min-w-[40rem] gap-6"
    >
      <div class="flex items-start gap-2">
        <app-input-form
          type="text"
          formControlName="numDni"
          label="DNI"
          placeholder="71916103"
          [isPositive]="true"
          [required]="true"
          [maxLength]="8"
        />
        <div class="pt-6">
          <button
            pButton
            type="button"
            icon="pi pi-search"
            class="p-button-rounded p-button-primary w-10 px-2 h-10"
            (click)="searchClientByDni()"
          ></button>
        </div>
      </div>
      <app-input-form
        type="text"
        formControlName="name"
        label="Nombre"
        placeholder="Elmer Jesus"
        [required]="true"
      />

      <app-input-form
        type="text"
        formControlName="firstLastname"
        label="Apellido Paterno"
        placeholder="Huaman"
        [required]="true"
      />

      <app-input-form
        type="text"
        formControlName="secondLastname"
        label="Apellido Materno"
        placeholder="Rojas"
        [required]="true"
      />

      <app-input-form
        type="email"
        formControlName="email"
        label="Email"
        placeholder="hearelmer242w@gmail.com"
        [required]="true"
      />

      <app-input-form
        type="text"
        formControlName="phone"
        label="Teléfono"
        placeholder="985996213"
        [required]="true"
        [maxLength]="9"
        [isPositive]="true"
      />

      <app-input-form
        type="text"
        formControlName="address"
        label="Dirección"
        placeholder="Jiron Callao"
      />

      <app-input-form
        type="date"
        formControlName="birthDate"
        label="Fecha de Nacimiento"
        [required]="true"
      />
    </div>

    <!-- Botón centrado al final -->
    <div class="mt-6 flex justify-end gap-x-4">
      <button
        type="button"
        class="px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 duration-300 ease-in-out"
        (click)="closeModal()"
      >
        Cancelar
      </button>

      <app-button
        type="submit"
        bgColor="bg-primary-500"
        moreClasses="py-2 px-6"
        [text]="userToEdit() ? 'Actualizar' : 'Agregar'"
        [icon]="isLoading() ? 'pi pi-spin pi-spinner' : 'pi pi-save'"
        [disabled]="!userForm.valid || isLoading()"
      />
    </div>
  </form>
</app-modal>

